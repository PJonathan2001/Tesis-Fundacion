name: CI/CD Pipeline en GitHub

on:
  push:
    branches:
      - main  # Se ejecuta cuando hay cambios en main

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout del código
        uses: actions/checkout@v3
      
      - name: Simular compilación
        run: |
          echo "Compilando el código..."
          sleep 40  # Simula que la compilación toma 40 segundos
          echo "Compilación completada"

  test:
    runs-on: ubuntu-latest
    needs: build  # Se ejecuta después de "build"
    steps:
      - name: Simular pruebas
        run: |
          echo "Ejecutando pruebas..."
          sleep 40  # Simula que las pruebas tardan 40 segundos
          echo "Pruebas completadas"

  deploy:
    runs-on: ubuntu-latest
    needs: test  # Se ejecuta después de "test"
    steps:
      - name: Simular despliegue
        run: |
          echo "Desplegando aplicación..."
          sleep 40  # Simula que el despliegue toma 40 segundos
          echo "Despliegue exitoso"
